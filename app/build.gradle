import movieApplication.buildSrc.Libs

apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-kapt'
apply plugin: 'androidx.navigation.safeargs.kotlin'
apply plugin: 'dagger.hilt.android.plugin'
apply plugin: 'kotlin-parcelize'

android {
    compileSdkVersion 29
    buildToolsVersion "29.0.3"

    kotlinOptions {
        jvmTarget = "1.8"
    }

    defaultConfig {
        applicationId "com.example.retrofitkotlin"
        minSdkVersion 26
        targetSdkVersion 29
        versionCode 1
        versionName "1.0"
        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        multiDexEnabled true
    }

    buildTypes {

        Properties properties = new Properties()
        properties.load(project.rootProject.file("local.properties").newDataInputStream())

        def tmdbApiKey = properties.getProperty("apiKey","")


        debug {
            buildConfigField 'String', "TMDB_API_KEY", tmdbApiKey
            resValue 'string', "api_key", tmdbApiKey
        }

        release {
            buildConfigField 'String', "TMDB_API_KEY", tmdbApiKey
            resValue 'string', "api_key", tmdbApiKey

            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'),
                    'proguard-rules.pro'
        }
    }

    viewBinding {
        enabled = true
    }

    dataBinding {
        enabled true
    }
}

dependencies {

    implementation Libs.Moshi.moshi
    kapt Libs.Moshi.moshiCodegen

    implementation Libs.Retrofit.retrofit
    implementation Libs.Retrofit.retrofitConverterMoshi
    implementation Libs.Retrofit.retrofitCoroutines

    implementation Libs.OkHttp.okhttp
    implementation Libs.OkHttp.interceptor

    implementation Libs.Kotlin.coroutines
    implementation Libs.Kotlin.coroutinesCore

    implementation Libs.Google.materialDesign

    implementation Libs.LiveData.liveData
    implementation Libs.Room.roomRunTime
    kapt Libs.Room.roomCompiler

    implementation Libs.Glide.glide
    annotationProcessor Libs.Glide.glideCompiler

    implementation Libs.Hilt.hiltAndroid
    kapt Libs.Hilt.hiltCompiler
    implementation Libs.Hilt.hiltViewModel
    kapt Libs.Hilt.hiltAndroidxCompiler

    implementation fileTree(dir: 'libs', include: ['*.jar'])

    implementation Libs.Kotlin.stdlib
    implementation Libs.Android.appCompat
    implementation Libs.Android.androidXCore
    implementation Libs.Android.constraintLayout
    implementation Libs.Android.multiDex

    testImplementation Libs.Test.jUnit
    androidTestImplementation Libs.Test.jUnitExt
    androidTestImplementation Libs.Test.espresso

    androidTestImplementation Libs.Test.coreTesting
    androidTestImplementation Libs.Test.testRules
    androidTestImplementation Libs.Test.espressoContrib

    implementation Libs.Navigation.navigationFragment
    implementation Libs.Navigation.navigationUI
    implementation Libs.Navigation.navigationDynamic

    testImplementation Libs.Test.mockk
    testImplementation Libs.Test.mockServer
    testImplementation Libs.Test.androidXTestCore
    testImplementation Libs.Test.coreTesting
    testImplementation Libs.Test.mockito
    implementation Libs.Test.androidXLegacy
}
